{"version":3,"sources":["webpack://library/webpack/universalModuleDefinition","webpack://library/webpack/bootstrap","webpack://library/./src/constants.js","webpack://library/./src/utils.js","webpack://library/./src/extension/debounce.js","webpack://library/./src/extension/throttle.js","webpack://library/./src/AC.js","webpack://library/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","SAVE_NAME","SAVE_STORAGE","concat","loadStorage","saveName","arguments","length","undefined","localState","localStorage","getItem","getSaveName","JSON","parse","saveInStorage","state","setItem","stringify","saveCurrState","getState","saveCurrStateDebug","console","log","debounce","saveAction","_timerId","clearTimeout","setTimeout","throttle","_lastCallTime","Date","now","saveStorage","type","createLocalSaveMiddleware","options","saveActions","isDebug","store","_saveCurrState","next","action","result","some","__webpack_exports__"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,OAAA,GAAAH,GACA,iBAAAC,QACAA,QAAA,QAAAD,IAEAD,EAAA,QAAAC,IARA,CASCK,OAAA,WACD,mBCTA,IAAAC,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,GAAA,CACAC,EAAAD,EACAE,GAAA,EACAT,QAAA,IAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA0DA,OArDAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAtB,GACA,oBAAAuB,eAAAC,aACAN,OAAAC,eAAAnB,EAAAuB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAnB,EAAA,cAAiDyB,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAhC,GACA,IAAAe,EAAAf,KAAA2B,WACA,WAA2B,OAAA3B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,yCClFO,IAAMC,EAAY,qBACZC,EAAY,GAAAC,OAAMF,EAAN,iBCMlB,SAASG,IAA2B,IAAfC,EAAeC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAC7BG,EAAa5C,OAAO6C,aAAaC,QAAQC,EAAYP,IAE3D,OAAOI,EAAaI,KAAKC,MAAML,QAAcD,EAG1C,SAASO,EAAcC,GAAsB,IAAfX,EAAeC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAC5CI,aAAaO,QAAQL,EAAYP,GAAWQ,KAAKK,UAAUF,IAGxD,SAASG,EAAcJ,EAAeK,EAAUf,GACnDU,EAAcK,IAAYf,GAGvB,SAASgB,EAAmBN,EAAeK,EAAUf,GACxDiB,QAAQC,IAAI,uBAAyBlB,GACrCiB,QAAQC,IAAIH,KACZL,EAAcK,IAAYf,GAC1BiB,QAAQC,IAAI,uBAGhB,SAASX,EAAYpC,GACjB,SAAA2B,OAAUF,EAAV,KAAAE,OAAuB3B,GCxBZgD,MALf,SAAkBC,EAAYN,GACtBM,EAAWC,UAAUC,aAAaF,EAAWC,UACjDD,EAAWC,SAAWE,WAAWT,EAAeM,EAAWD,WCKhDK,MAPf,SAAkBJ,EAAYN,KACrBM,EAAWK,eAAiBL,EAAWK,cAAgBL,EAAWI,UAAYE,KAAKC,SACpFP,EAAWK,cAAgBC,KAAKC,MAChCb,MCDD,SAASc,IACZ,MAAO,CACHC,KAAMhC,GCOC,SAASiC,EAA0BC,GAW9C,OATAA,OAAsB5B,IAAZ4B,EAAwBA,EAAU,IAIpCC,iBAAsC7B,IAAxB4B,EAAQC,YAA4BD,EAAQC,YAAc,GAChFD,EAAQ/B,SAAW+B,EAAQ/B,SAAW+B,EAAQ/B,SAAW,GACzD+B,EAAQE,UAAYF,EAAQE,QAGrB,SAAAC,GAEH,IAAMC,EAAiBJ,EAAQE,QAC3BjB,EAAmB5B,KAAK,KAAMsB,EAAewB,EAAMnB,SAAUgB,EAAQ/B,UAErEc,EAAc1B,KAAK,KAAMsB,EAAewB,EAAMnB,SAAUgB,EAAQ/B,UAEpE,OAAO,SAAAoC,GACH,OAAO,SAAAC,GACH,IAAMC,EAASF,EAAKC,GAqBpB,OApBIN,EAAQC,YAAYO,KAAK,SAAAnB,GAIzB,SAAKA,EAAWS,MAAQT,IAAeiB,EAAOR,MAAQT,EAAWS,MAAQT,EAAWS,OAASQ,EAAOR,aAKxE1B,IAAxBiB,EAAWD,eAAkDhB,IAAxBiB,EAAWI,WAGhDJ,EAAWD,SACXA,EAASC,EAAYe,GAErBX,EAASJ,EAAYe,IAElB,OACyBE,EAAOR,OAAShC,IAChDsC,IACGG,KApDvB5E,EAAAQ,EAAAsE,EAAA,4BAAAV,IAAApE,EAAAQ,EAAAsE,EAAA,gCAAAZ,IAAAlE,EAAAQ,EAAAsE,EAAA,8BAAA5C,IAAAlC,EAAAQ,EAAAsE,EAAA,iCAAA3C,IAAAnC,EAAAQ,EAAAsE,EAAA,gCAAAzC,IAAArC,EAAAQ,EAAAsE,EAAA,kCAAA9B,IAAAhD,EAAAQ,EAAAsE,EAAA,kCAAA1B,IAAApD,EAAAQ,EAAAsE,EAAA,uCAAAxB","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"library\"] = factory();\n\telse\n\t\troot[\"library\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export const SAVE_NAME = '__REDUX-LOCAL-SAVE'\nexport const SAVE_STORAGE = `${SAVE_NAME}_SAVE_STORAGE`","import { SAVE_NAME } from './constants'\n\n//TODO: do a crushing facility for a larger state and fix multi SAVE_NAME\n/**\n * Returns saved state from localStorage\n * @return {Object} - state\n */\nexport function loadStorage(saveName = '') {\n    const localState = window.localStorage.getItem(getSaveName(saveName))\n    //TODO: Make a check on the object, etc.\n    return localState ? JSON.parse(localState) : undefined\n}\n\nexport function saveInStorage(state, saveName = '') {\n    localStorage.setItem(getSaveName(saveName), JSON.stringify(state))\n}\n\nexport function saveCurrState(saveInStorage, getState, saveName) {\n    saveInStorage(getState(), saveName)\n}\n\nexport function saveCurrStateDebug(saveInStorage, getState, saveName) {\n    console.log('-----SAVE_STATE-----' + saveName)\n    console.log(getState())\n    saveInStorage(getState(), saveName)\n    console.log('-------------------')\n}\n\nfunction getSaveName(name) {\n    return `${SAVE_NAME}_${name}`\n}","function debounce(saveAction, saveCurrState) {\n    if (saveAction._timerId) clearTimeout(saveAction._timerId)\n    saveAction._timerId = setTimeout(saveCurrState, saveAction.debounce)\n}\n\nexport default debounce","function throttle(saveAction, saveCurrState) {\n    if (!saveAction._lastCallTime || saveAction._lastCallTime + saveAction.throttle <= Date.now()) {\n        saveAction._lastCallTime = Date.now()\n        saveCurrState()\n    }\n}\n\nexport default throttle","import { SAVE_STORAGE } from './constants'\n\nexport function saveStorage() {\n    return {\n        type: SAVE_STORAGE\n    }\n}","import { saveInStorage, loadStorage, saveCurrStateDebug, saveCurrState } from \"./utils\";\nimport { SAVE_NAME, SAVE_STORAGE } from './constants'\n//extensions\nimport debounce from \"./extension/debounce\";\nimport throttle from './extension/throttle';\n\n/**\n * Returns a middleware for redux store\n * @param {{saveActions: Array, saveName: String, isDebug: Boolean}} options - Extra options\n * @return {function} store => next => action \n */\nexport default function createLocalSaveMiddleware(options) {\n    /*Default options*/\n    options = options !== undefined ? options : {}\n    //there are two types of \"saveAction\"\n    //1. DUMB: [TEST_ACTION_1, TEST_ACTION_2] (just a string means type action)\n    //2 SMART: [{type: TEST_ACTION_1}, {type: TEST_ACTION_2, debounce: 1000}] (for example, it is possible to pass additional parameters)\n    options.saveActions = options.saveActions !== undefined ? options.saveActions : []\n    options.saveName = options.saveName ? options.saveName : ''\n    options.isDebug = !!options.isDebug\n    /****/\n\n    return store => {\n\n        const _saveCurrState = options.isDebug ?\n            saveCurrStateDebug.bind(null, saveInStorage, store.getState, options.saveName)\n            :\n            saveCurrState.bind(null, saveInStorage, store.getState, options.saveName)\n\n        return next => {\n            return action => {\n                const result = next(action)\n                if (options.saveActions.some(saveAction => {\n                    //such a check, because we get two types of actions\n                    //1. DUMB: [TEST_ACTION_1, TEST_ACTION_2] (just a string means type action)\n                    //2 SMART: [{type: TEST_ACTION_1, throttle: 500}, {type: TEST_ACTION_2, debounce: 1000}] (for example, it is possible to pass additional parameters)\n                    if (!saveAction.type && saveAction !== action.type || saveAction.type && saveAction.type !== action.type)\n                        return false\n\n                    //debounce is an option that specifies how long the action should not come again for save\n                    //throttle is an options that \n                    if (saveAction.debounce === undefined && saveAction.throttle === undefined)\n                        return true\n\n                    if (saveAction.debounce)\n                        debounce(saveAction, _saveCurrState)\n                    else\n                        throttle(saveAction, _saveCurrState)\n\n                    return false\n                }) ||/* default action to save -> */action.type === SAVE_STORAGE)\n                    _saveCurrState()\n                return result\n            }\n        }\n    }\n}\n\nexport * from './AC'\nexport * from './constants'\nexport * from './utils'"],"sourceRoot":""}